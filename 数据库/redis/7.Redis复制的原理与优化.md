# Redis复制的原理与优化

## 主从复制配置-介绍

* 备份
* 可以一主多从
* 进行读写分离
* 扩展redis读的能力

## 主从复制配置-操作

1. 使用slaveof命令

   * `slaveof 127.0.0.1 6379 ` 在从节点执行，申请成为从节点
   * `slaveof no one` 从节点执行，取消成为从节点
   * 不需要重启

2. 使用配置文件

   ````
   slaveof ip port # 成为谁的从节点
   slave-read-only yes # 只读
   ````

## runid和复制偏移量

* `info server` 查看`run_id`，用于标识redis服务，对方更改后进行全量复制
* `info replication`复制偏移量 , 标识数据量的同步更新，主从差很大说明主从有问题

## 全量复制

* 先复制RDB文件，导入后再同步

## 全量复制开销 + 部分复制

## 故障处理

## 主从复制常见问题

