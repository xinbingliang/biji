# 数据处理

## 数据绑定

### 对象

```javascript
Page({
    data:{
        a: 1,
        b: 2
        }
    });

<template name="obj">
<view>{{for}}</view>
</template>

<template is="obj" data="{{for: a, bar: b}}"></template>
```

扩展运算符 `...`

```xml
<template name="obj">
<view>{{a}}</view>
</template>

<template is="obj" data="{{...obj1, ...obj2, e:5}}"></templat
```

```javascript
Page({
    data:{
        obj1:{
            a: 1,
            b: 2
        },
        obj2:{
            c: 3,
            d : 4
        }
    };
```

 key 和 value 相同

````javascript
Page({
    data:{
        foo: 'my-foo',
        bar: 'mybar'
    }
});

<template name="obj">
<view>{{foo}}</view>
</template>

<template is="obj" data="{{foo, bar}}"></template>
````

任意组合方式，后面覆盖前面

```javascript
Page({
    data:{
        obj1: {
            a: 1,
            b: 2
        },
        obj2: {
            b: 3,
            c: 4
        },
        a: 5
    }
});

<template name="obj">
<view>{{c}}</view>
</template>

<template is="obj" data="{{...obj1, ...obj2, a, c:6}}"></template>
```

## 条件语句

* wx:if

  ```xml
  <view wx:if="{{flag}}">显示</view>

  <view wx:if="{{length > 100}}">显示第一内容</view>
  <view wx:elif="{{length > 10}}">显示第二内容</view>
  <view wx:else>显示第三内容</view>
  ```

* block wx:if

  ````xml
  <block wx:if="true">
      <view>view1</view>
      <view>view2</view>
  </block>
  ````

`wx:if`条件切换时，框架有进行局部渲染，确保条件切换时销毁或重新渲染，而hidden始终渲染，只是不显示，切换频繁使用hidden

## 列表循环

### wx:for

````javascript
Page({
  data: {
    array: [{
      message: 'foo',
    }, {
      message: 'bar'
    }]
  }
})

<view wx:for="{{array}}">
  {{index}}: {{item.message}}
</view>
````

### wx:for-item

```xml
<view wx:for="{{array}}" wx:for-index="idx" wx:for-item="itemName">
  {{idx}}: {{itemName.message}}
</view>
```

### block wx:for

```xml
<block wx:for="{{[1, 2, 3]}}">
    <view>{{index}}</view>
    <view>{{item}}</view>
</block>
```

### wx:key

## 模版

### 定义模版

```javascript
<template name="msgItem">
    <view>
        <text>{{index}}:{{msg}}</text>
        <text>Time: {{time}}</text>
    </view>
</template>

Page({
    data:{
        item: {
        index: 0,
        msg: "this is a template",
        time: "2016-09-15"
    }
    }
});
```

### 使用模版

```xml
<template is="msgItem" data="{{...item}}"></template>
```

### is决定渲染模版

````xml
<template name="odd">
  <view> odd </view>
</template>
<template name="even">
  <view> even </view>
</template>

<block wx:for="{{[1, 2, 3, 4, 5]}}">
    <template is="{{item % 2 == 0 ? 'even' : 'odd'}}"/>
</block>
````











