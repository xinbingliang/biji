# go的web框架-gin

## gin的helloworld体验

````go
package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

func main() {
	r := gin.Default()
	r.GET("/ping", func(c *gin.Context) {
		c.JSON(http.StatusOK, gin.H{
			"message": "pong",
		})
	})
	r.Run() // listen and serve on 0.0.0.0:8080
}
````

## 使用New和Default初始化路由器的区别

````go
	router := gin.Default() //会开启logger和recovery（crash-free）中间件
	r := gin.New()
````

`````go
func main() {
	r := gin.Default() //会开启logger和recovery（crash-free）中间件
	r.GET("/geting", geting)
	r.POST("/posting", posting)
	r.PUT("/puting", puting)
	r.DELETE("/deleteing", deleteing)
	r.PATCH("/patching", patching)
	r.HEAD("/heading", heading)
	r.OPTIONS("/optionsing", optionsing)
	r.Run() // listen and serve on 0.0.0.0:8080
}
`````

## gin的路由分组

`````go
func main() {
	router := gin.Default()

	v1 := router.Group("/v1")
	{
		v1.POST("/login", loginEndpoint)
		v1.PUT("/submit", submitEndpoint)
		v1.GET("/read", readEndpoint)
	}

	router.Run(":8080")
}
`````

## 获取url中的变量

````go
package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

func readEndpoint(c *gin.Context) {
	c.JSON(http.StatusOK, gin.H{
		"id": c.Param("id"),
		"action": c.Param("action"),
	})
}

func main() {
	router := gin.Default()

	v1 := router.Group("/v1")
	{
		v1.GET("/read/:id/:action", readEndpoint)
	}

	router.Run(":8088")
}
````

* `http://127.0.0.1:8088/v1/read/12/put`

### 值的约束

````go
package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

type Person struct {
	ID int `uri:"id" binding:"required"`
	Name string `uri:"name" binding:"required"`
}

func main() {
	router := gin.Default()
	router.GET("/:name/:id", func(c *gin.Context){
		var person Person
		if err := c.ShouldBindUri(&person); err != nil {
			c.Status(404)
			return
		}
		c.JSON(http.StatusOK, gin.H{
			"name": person.Name,
			"id": person.ID,
		})
	})

	router.Run(":8088")
}
````

## 获取get和post表单信息

## gin返回protobuf

## 登录的表单验证

## 注册表单的验证

## 表单验证错误翻译成中文

## 表单中文翻译的json格式化细节

## 自定义gin中间件

## 通过abort终止中间件后续逻辑的执行

## gin的中间件原理源码分析

## gin返回html

## 加载多个html文件

## static静态文件的处理

## gin的优雅退出

