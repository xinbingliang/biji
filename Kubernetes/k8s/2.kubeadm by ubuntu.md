# kubeadm by ubuntu

## 确保 iptables 工具不使用 nftables 后端

````shell
update-alternatives --set iptables /usr/sbin/iptables-legacy
update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy
update-alternatives --set arptables /usr/sbin/arptables-legacy
update-alternatives --set ebtables /usr/sbin/ebtables-legacy
````

## 配置必要的翻墙

1. 使用nat

2. 使宿主机ssr局域网代理

3. 设置ubuntu

4. `vim /etc/profile`

   ````
   export http_proxy=http://192.168.2.59:1080
   export https_proxy=http://192.168.2.59:1080
   export ftp_proxy=http://192.168.2.59:1080
   ````

   ````
   source /etc/profile
   ````

   ```
   apt-get -o Acquire::http::proxy="http://192.168.2.59:1080" update
   ```


## 官网方式安装

[官网位置](https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/)

```
sudo apt-get update && sudo apt-get install -y apt-transport-https curl
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
cat <<EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF
sudo apt-get update
sudo apt-get install -y kubelet kubeadm kubectl
sudo apt-mark hold kubelet kubeadm kubectl
```



