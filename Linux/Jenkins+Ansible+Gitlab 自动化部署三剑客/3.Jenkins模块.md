# Jenkins

## 安装

* `sudo apt-get install openjdk-8-jre`
* `sudo apt-get install openjdk-8-jkd`

````
# /etc/profile
#set jdk environment 
export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
export JRE_HOME=$JAVA_HOME/jre 
export CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH 
export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH 
````

* `source /etc/profile `
* `wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add - `
* `sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list' `
* `sudo apt-get update`
* `sudo apt-get install jenkins`

默认端口是8080  可以在 /etc/init.d/jenkins 

## job环境

* 代表一个任务或者项目
* 可配置可执行
* 执行后的记录称为Build
* 日志监控和记录
* 所有文件集中保存

### freestyle jib

* 需要在页面添加模块配置项与参数完成配置
* 每个Job仅能实现一个开发功能
* 无法将配置代码化，不利于Job配置迁移与版本控制
* 逻辑相对简单，无需额外学习成本

### Pipeline job

* 匹配持续集成与持续交付的概念
* 所有模块，参数配置都可以体现为一个pipline脚本
* 可以定义多个Stage构建一个管道工作集
* 所有配置代码化，方便Job配置迁移与版本控制
* 需要脚本语法


## 使用

`````shell
#!/bin/sh
export PATH="/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin"

# Print env variable
echo "[INFO] Print env variable"
echo "Current deployment envrionment is $deploy_env" >> test.properties 
echo "The build is $version" >> test.properties
echo "[INFO] Done..."

# Check test properties
echo "[INFO] Check test properties"
if [ -s test.properties ]
then 
    cat test.properties
    echo "[INFO] Done..."
else
    echo "test.properties is empty"
fi

echo "[INFO] Build finished......"
`````




















