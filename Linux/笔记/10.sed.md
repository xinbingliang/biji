# sed

`sed`数据流编辑器，对纯`ASSIC`文件做逐行处理，也叫行编辑器，并且不对源文件进行操作

* `sed 'addresscommand' file1 ....`
  * `-n` 静默模式，模式空间不显示
  * `-i` 直接修改源文件
  * `-e script -e script` 多次使用
  * `-f /file` 指定一个文件
  * `-r` 使用扩展正则


* Address:
  1. `startline`, `endline`
  2. 使用模式`/pattern/`
  3. `/pattert1/`，`/pattert2/` `pattert1`开始到`pattert2`结束的行
  4. `lineNumber` 指定的行
  5. `$`表示最后一行
  6. `startLine,+N` 从指定的行向后n行，一共`n+1`行


* Command:

  * `d` 删除符合条件的行，被匹配的不被显

    ```shell
    sed '1,2d' /etc/fstab
    ```

  * `p` 打印符合条件的行

    ```shell
    sed '/^\//p' /etc/fstab	#被匹配的行会显示两次
    sed -n '/^\//p' /etc/fstab #静默模式
    ```

  * `a\string` 直接在行后面追加新的行，内容为string

    ```shell
    sed '/^d/a \# hello world' /etc/fstab #在d开头的行后加上行# hello world 
    ```

  * `i \string` 在指定的行之前加上指定的行

    ```shell
    sed '/^f/i \xinbingliang' test.txt
    ```

  * `r filename` 将指定的文件内容添加到指定的行处

    ```shell
    sed '1,2r /etc/issue' /etc/fstab 
    ```

  * `w filename` 将指定范围内的内容存入filename文件中

    ```shell
    sed '1,$w ./save' /etc/fstab
    ```

  * `s/pattern/string` 查找并替换

    * g 全局替换

    * i 忽略大小写

      ```shell
      sed '1,$s/oot/OOT/' save
      sed 's/\//#/' save
      sed 's/\//#/g' save #对每一行所有替换
      ```

      ​

  * `s///`或`s###`或`s@@@`

    * &引用匹配到整个串

````shell
sed 's#l..e#&r#' liv #将l..e替换成l..er
sed 's#\(l..e\)#\1r#' liv 
sed -e 's#l..e#&r#' -e 's/[[:space:]]/---/g' liv
sed -f script -e 's/[[:space:]]/-/g' liv#执行script文件中的sed命令
````