# 文件查找

## locate 

非实时查找，查找文件数据库，非精确快速

* `updatedb` 手动更新数据库

## find

实时，精确，慢速，遍历指定目录

`find 查找的路径 查找标准 查找后的处理`

* 查找路径：默认为当前目录
* 查找标准：默认为该路径下的所有文件
* 处理动作：默认打印

### 匹配标准

#### 文件名通配符

* `*` 任意字符任意长度
*  `?` 任意一个字符
* `[]`

***

- `-name filename` 对文件名做精确查找（严格区分大小写），`find /etc/ -name 'passwd'`

- `-iname ` 不区分大小写

- `-regex pattern` 基于正则表达式进行文件名匹配

- `-user USERNAME` 基于所属主进行查找 `find /home/ -user xin` 

- `-group GROUP` 基于属组进行查找 `find /home/ -group xin`

- `-uid` 

- `-gid`

- `-nouser` 没有属主的文件

- `-nogroup` 没有用户组的文件

- `-type` 文件类型

- `-size ` 根据文件类型查找

  - `nk`
  - `nm`
  - `nG`
  - `[+-]nk`

- 组合条件

  - `-o` 或
  - `-a` 与
  - `-not` 非

  ````shell
  find /tmp -nouser -a -type d
  find /tmp -not -type d
  ````

* 时间

  * `-mtime` 天
  * `-ctime `
  * `-atime`
  * `-mmin` 分钟
  * `-cmin`
  * `-amin`
  * [+-]n

  `find /tmp -atime +7`

* `-prem MODE` 根据权限来查找

  * `-mode` 每一位权限都被包含
  * `/mode` 有任意一位符合即可 

  ````shell
  find -prem 644
  find -prem -644
  find -prem /644
  ````

* 动作

  * `-print` 默认显示
  * `-ls` 类似于`ls -l`，`find -perm -644 -ls`
  * `-ok command {} \;` 要求执行命令时用户确认
  * `-exec command {} \;` 执行命令时不会要求用户确认

* `xargs` 从标准输入接收并执行

  ```shell
  find /etc/ -size +1M | Xargs echo >> /test/largefiles
  类似于 find /etc/ -size +1M -exec echo {} >> /test/largefiles
  ```

  ​







