# Mongodb

* 使用`show dbs` 可以查看所有数据库的列表

* `db`命令可以查看当前数据库对象或集合

* `use` 连接指定的数据库

* `db.dropDatabase()` 销毁数据库

  ````
  use xxx
  db.dropDatabase()
  ````

## 基本概念

* `Mongodb`最终存储的数据是`bson`数据格式

### 文档的之间的关系

1. 嵌入式关系

   ````
   {
   文档1
     address: [{
      	文档2.1
     },{
       文档2.2
     }]
   }
   ````

2. 引用式关系

`````
{
  文档1
  address: [
    objectId('http://bbs.upseed.net/')		//文档id
  ]
}
`````

### 元数据

`DBNAME`可以用`db`或数据库名代替

* `DBNAME.system.namespaces`	列出所有名字空间

* `DBNAME.system.indexs`    列出所有索引

* `DBNAME.system.profile`    列出数据库概要信息

* `DBNAME.system.users`     列出访问数据库的用户

* `DBNAME.system.sources`    列出服务器信息


## 集合创建和删除

http://www.eqxiu.com/site/show

### 创建集合

````
use mydb
db.createCollection('users')
show collections;
````

### 删除集合

````
db.users.drop();
````

## 向集合中插入数据

### 使用insert()

一次插入多条

````javascript
> db.users.insert([
{
name : "jam",
email : "jam@qq.com"
},
{ 
name : "tom",
email : "tom@qq.com"
}
])
````

### 使用save()

````javascript
db.users.save([
  {
name : "jam",
email : "jam@qq.com"
},
{ 
name : "tom",
email : "tom@qq.com"
}
])
````

## 数据查询

### 查询所有数据

````javascript
db.users.find()
db.users.find().pretty()
````

### 使用AND

传入多个键值对时，MongoDB 就会将其作为 AND 查询处理。

````
db.post.find({"by":"shiyanlou","title": "MongoDB Overview"}).pretty()
````

### 使用OR

```
db.users.find({$or:[{"by":"shiyanlou"},{"title":"MongoDB Overview"}]})
```

### 同时使用AND和OR

````
> db.post.find({
    "likes": {$gt:10},
    $or: [
        {"by": "shiyanlou"},
        {"title": "MongoDB Overview"}
    ]
}).pretty()
````

## 文档操作



