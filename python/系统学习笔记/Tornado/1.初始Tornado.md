#  初始Tornado

## 安装

* `pip install tornado==4.3`

Tornado应该运行在**类Unix平台**，在线上部署时为了最佳的性能和扩展性，仅推荐**Linux**和**BSD**（因为充分利用Linux的epoll工具和BSD的kqueue工具，是Tornado不依靠多进程/多线程而达到高性能的原因）。对于Mac OS X，虽然也是衍生自BSD并且支持kqueue，但是其网络性能通常不太给力，因此仅推荐用于开发。对于Windows，Tornado官方没有提供配置支持，但是也可以运行起来，不过仅推荐在开发中使用。

## Hello World

````python
# -*- conding: utf-8 -*-
import tornado.web # tornado web框架的核核心模块
import tornado.ioloop #

class IndexHandler(tornado.web.RequestHandler):
    def get(self):
        """get请求方式"""
        self.write("Hello World")

if __name__ == "__main__":
    app = tornado.web.Application([
        (r"/", IndexHandler)
    ])

    app.listen(8080) # 服务器端口的绑定
    tornado.ioloop.IOLoop.current().start() # 添加到epoll，开始监听端口
````

## Httpserver

### httpserver

```python
# coding:utf-8
import tornado.web
import tornado.ioloop
import tornado.httpserver # 新引入httpserver模块

class IndexHandler(tornado.web.RequestHandler):
    """主路由处理类"""
    def get(self):
        """对应http的get请求方式"""
        self.write("Hello Itcast!")

if __name__ == "__main__":
    app = tornado.web.Application([
        (r"/", IndexHandler),
    ])
    # ------------------------------
    # 我们修改这个部分
    # app.listen(8000)
    http_server = tornado.httpserver.HTTPServer(app)
    http_server.listen(8000)
    # ------------------------------
    tornado.ioloop.IOLoop.current().start()
```

### 单进程和多进程

```
# coding:utf-8

import tornado.web
import tornado.ioloop
import tornado.httpserver 

class IndexHandler(tornado.web.RequestHandler):
    """主路由处理类"""
    def get(self):
        """对应http的get请求方式"""
        self.write("Hello Itcast!")

if __name__ == "__main__":
    app = tornado.web.Application([
        (r"/", IndexHandler),
    ])
    http_server = tornado.httpserver.HTTPServer(app) 
    # -----------修改----------------
    http_server.bind(8000)
    http_server.start(0)
    # ------------------------------
    tornado.ioloop.IOLoop.current().start()
```

* `ps -ef | grep hello.py`

http_server.bind(port)方法是将服务器绑定到指定端口。

http_server.start(num_processes=1)方法指定开启几个进程，参数num_processes默认值为1，即默认仅开启一个进程；如果num_processes为None或者<=0，则自动根据机器硬件的cpu核芯数创建同等数目的子进程；如果num_processes>0，则创建num_processes个子进程。

* app.listen()这个方法只能在单进程模式中使用。
* 不建议使用这种多进程的方式，而是**手动开启多个进程，并且绑定不同的端口**

## options





