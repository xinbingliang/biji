# 迭代器装饰器生成器和闭包

## 迭代器

可迭代对象

* 集合数据类型：list、tuple、dict、set、str

* generator，生成器和带yield的generator function、

* 判断是否可迭代

  ```python
  from collections import Iterable

  isinstance('abc', Iterable) #true
  ```

```python
b = (x for x in range(10)) #这是一个生成器
```

## 迭代器

生成器也是迭代器，能使用next()

* 判断是否是迭代器

  ```python
  from collections import Iterator

  isinstance([], Iterator)
  ```

### iter函数

```python
new_iter = iter([1, 2, 3])
print(next(new_iter))
print(next(new_iter))
```

## 闭包

```python
def test(number):
    def test_in(number_in):
        print(number_in + number)

    return test_in

T = test(10)
T(100)
```

### 闭包应用

```python
def line_conf(a, b):
    def line(x):
        return a*x + b

    return line

line1 = line_conf(1, 1)
line2 = line_conf(4, 5)

print(line1(5))
print(line2(5))
```

## 装饰器

对函数的装扮，装饰器在调用之前，已经完成了装饰

```python
def w1(func):
    def inner():
        print('---正在权限验证---')
        func()
    return inner

@w1
def f1():
    print('f1')

@w1
def f2():
    print('f2')


@w1
def f3():
    print('f3')


f1()
f2()
f3()
```

### 装饰有参数函数

```python
def fucn(funcName):
    def inner(a, b):
        funcName(a, b)
    
    return inner

@fucn
def test(a, b):
    print(a, b)

test(1, 2)
```

```python
def fucn(funcName):
    def inner(*args, **kwargs):
        funcName(*args, **kwargs)
    
    return inner

@fucn
def test(a, b):
    print(a, b)

test(1, 2)
```

### 带返回值的装饰器

```python
def fucn(funcName):
    def inner(*args, **kwargs):
        return funcName(*args, **kwargs)
    
    return inner

@fucn
def test(a, b):
    return 'aa'

print(test(1, 2))
```

###通用装饰器

```python
def fucn(funcName):
    def inner(*args, **kwargs):
        return funcName(*args, **kwargs)
    
    return inner

@fucn
def test(a, b):
    return 'aa'

@fucn
def test2():
    print('haha')

test(1, 2)
test2()
```

### 带参数装饰器

```python
def time_func(pre='123'):
    def func(funcname):
        def func_in():
            print(pre)
            funcname()

        return func_in
    return func

@time_func('456')
def test():
    print("---test---")

test()
```

## 作用域









































