# 反射

![](./images/反射说明.jpg)

基本介绍 

1. 反射可以在运行时动态获取变量的各种信息，比如变量的类型，类别 
2. 如果是结构体变量，还可以获取到结构体本身的信息(包括结构体的字段、方法) 
3. 通过反射，可以修改变量的值，可以调用关联的方法。 
4. 使用反射， 需要import(“reflect")

反射重要的函数和概念 

1. `reflect.TypeOf`(变量名) ， 获取变量的类型， 返回`reflect.Type`类型 
2. `reflect.ValueOf`(变量名) ， 获取变量的值， 返回`reflect.Value`类型`reflect.Value`是一个结构体类型。 通过`reflect.Value`， 可以获取到关于该变量的很多信息。
3. 变量、`interface{}`和`reflect.Value`是可以相互转换的， 这点在实际开发中， 会经常使用到。

## 简单操作

````go
package main

import (
	"fmt"
	"reflect"
)

func reflectTest(b interface{})  { //为了对任何数据类型接受
	//通过反射获得传入变量的type 和 kind 值
	//1. 先获取到reflect.Type
	rTyp := reflect.TypeOf(b)
	fmt.Println(rTyp) // int

	//2. 获取到reflect.value
	rVal := reflect.ValueOf(b)
	fmt.Println(rVal) //这个不是普通100， 而是reflect.int
	fmt.Printf("%T", rVal) //真实类型 reflect.Value

	n2 := 2 + rVal.Int()
	fmt.Println(n2)

	//3. 将rVal 转interface{}
	iv := rVal.Interface()
	//将interface{}通过断言转成需要的类型
	num2 := iv.(int)
	fmt.Println("num2", num2)
}

func main() {
	var num int = 100
	reflectTest(num)
}
````















